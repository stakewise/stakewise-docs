---
title: Fee Claiming
sidebar_position: 2
---

# Fee Claiming

It is possible to periodically withdraw rewards for the Vault's fee shareholders through the Fee Splitter system.

:::custom-info[Prerequisites]
- **Set Fee Claimer Role**: In your Vault settings, assign the operator's wallet address as the **Fee Claimer** in the Roles tab
- **Start with Flag**: Add the `--claim-fee-splitter` flag when starting the Operator Service
:::

## Configuration

The automated fee claiming process can be configured using environment variables:

:::custom-info[Environment Variables]
**`FEE_SPLITTER_INTERVAL`** - Controls how often fee claiming runs in seconds (default: 86400 seconds = 24 hours)

**`FEE_SPLITTER_MIN_ASSETS`** - Minimum amount accumulated in the fee splitter contract (in Wei) before processing withdrawals to avoid unnecessary gas fees (default: 1000000000000000 Wei = 0.001 ETH)
:::

## How It Works

The fee claiming task combines multiple operations into a single multicall transaction:

1. **Harvest vault rewards** from Keeper contract
2. **Withdraw splitter rewards** on behalf of each shareholder (rewards go to exit queue)
3. **Claim exited assets** on behalf of each shareholder (assets go directly to shareholder addresses)

## Usage

```bash
# Start operator with fee claiming enabled
./operator start-local \
  --vaults=0x3320a...68 \
  --consensus-endpoints=http://localhost:5052 \
  --execution-endpoints=http://localhost:8545 \
  --claim-fee-splitter
```

:::custom-notes[Gas Optimization]
To avoid unnecessary gas fees from the operator's wallet, withdrawals are processed only if their total amount exceeds the minimum threshold set by `FEE_SPLITTER_MIN_ASSETS`.
:::
