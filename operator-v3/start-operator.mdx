---
title: 5. Start Operator
sidebar_position: 5
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Admonition from '@theme/Admonition';
import useBaseUrl from '@docusaurus/useBaseUrl';

# Start Operator

You are ready to run the Operator Service using the `start` command, passing your Vault address and consensus and execution endpoints as flags.

## Prerequisites

If you **did not** use Operator Service to generate validator keys, you will need to add the following flag:

- `--keystores-dir` - The directory with validator keys in the [EIP-2335 â†—](https://eips.ethereum.org/EIPS/eip-2335) standard. The folder must contain either a single `password.txt` password file  for all keystores or separate password files for each keystore with the same name as keystore, but ending with `.txt` (e.g., `keystore1.json`, `keystore1.txt`)

If you **did not** use Operator Service to generate the hot wallet, you will need to add the following flags:

- `--hot-wallet-file` - Path to the password-protected `.txt` file containing your hot wallet private key
- `--hot-wallet-password-file` - Path to a `.txt` file containing the password to open the protected hot wallet private key file

If you **did not** use Operator Service to generate deposit data file, or you use combined deposit data file from multiple operators, you will need to add the following flag:

- `--deposit-data-file` - Path to the deposit data file (Vault directory is default)


There are several ways to run the Operator Service, depending on how you store private keys.

## Running Options

Depending on your installation method, use the appropriate command format:

<Tabs groupId="installation-types">
  <TabItem value="binary" label="Binary" default>
    #### Using Binary

    ```bash
    ./operator start \
      --vault=0xf27...10ad9 \
      --consensus-endpoints=https://consensus-node \
      --execution-endpoints=https://execution-node
    ```
  </TabItem>

  <TabItem value="docker" label="Docker">
    #### Using Docker

    For Docker, you first need to mount the folder containing validator keystores and include the `--data-dir` flag alongside the `start` command:

    ```bash
    docker run --restart on-failure:10 \
    -u $(id -u):$(id -g) \
    -v ~/.stakewise/:/data \
    europe-west4-docker.pkg.dev/stakewiselabs/public/v3-operator:v3.1.10 \
    src/main.py start-local \
    --vault=0xf27...10ad9 \
    --data-dir=/data \
    --consensus-endpoints=http://localhost:5052 \
    --execution-endpoints=http://localhost:8545
    ```
  </TabItem>

  <TabItem value="source" label="Source Files">
    #### Using Source Files

    ```bash
    PYTHONPATH=. poetry run python src/main.py start-local \
    --vault=0xf27...10ad9 \
    --consensus-endpoints=http://localhost:5052 \
    --execution-endpoints=http://localhost:8545
    ```
  </TabItem>
</Tabs>

:::custom-notes[Setup Complete]
Congratulations ðŸŽ‰! Your Operator Service is now running and ready to trigger validator registrations within your Vault. Monitor the logs to ensure validators are being registered successfully.
:::

## Optional Flags

| Flag | Description |
|------|-------------|
| <nobr>`--min-validators-registration`</nobr> | Minimum number of validators required to start registration |
| <nobr>`--pool-size`</nobr> | Number of processes in a pool |
| <nobr>`--log-level`</nobr> | The log level. Options: `fatal`, `error`, `warning`, `info`, `debug` |
| <nobr>`--log-format`</nobr> | The log record format. Options: `plain` or `json` |
| <nobr>`--hashi-vault-parallelism`</nobr> | How many requests to K/V secrets engine to do in parallel |
| <nobr>`--hashi-vault-key-prefix`</nobr> | Key prefix(es) in the K/V secret engine under which validator signing keys are stored |
| <nobr>`--hashi-vault-key-path`</nobr> | Key path(s) in the K/V secret engine where validator signing keys are stored |
| <nobr>`--hashi-vault-token`</nobr> | Authentication token for accessing HashiCorp Vault |
| <nobr>`--hashi-vault-url`</nobr> | The base URL of the vault service (e.g., `http://vault:8200`) |
| <nobr>`--remote-signer-url`</nobr> | The base URL of the remote signer (e.g., `http://signer:9000`) |
| <nobr>`--vault`</nobr> | Address of the Vault to register validators for |
| <nobr>`--consensus-endpoints`</nobr> | Comma separated list of API endpoints for consensus nodes |
| <nobr>`--execution-jwt-secret`</nobr> | JWT secret key used for signing and verifying JSON Web Tokens when connecting to execution nodes |
| <nobr>`--execution-endpoints`</nobr> | Comma separated list of API endpoints for execution nodes |
| <nobr>`--harvest-vault`</nobr> | Whether to submit vault harvest transactions. Default: `false` |
| <nobr>`-v, --verbose`</nobr> | Enable debug mode. Default: `false` |
| <nobr>`--metrics-port`</nobr> | The Prometheus metrics port. Default: `9100` |
| <nobr>`--metrics-prefix`</nobr> | The Prometheus metrics prefix. Default: `sw_operator` |
| <nobr>`--metrics-host`</nobr> | The Prometheus metrics host. Default: `127.0.0.1` |
| <nobr>`--enable-metrics`</nobr> | Whether to enable metrics server. Default: disabled |
| <nobr>`--network`</nobr> | The network of the Vault. Options: `mainnet`, `hoodi`, `gnosis`. Default: network specified at `init` command |
| <nobr>`--deposit-data-file`</nobr> | Path to the `deposit_data.json` file. Default: file generated with `create-keys` command |
| <nobr>`--keystores-dir`</nobr> | Absolute path to the directory with all the encrypted keystores. Default: directory generated with `create-keys` command |
| <nobr>`--keystores-password-file`</nobr> | Absolute path to the password file for decrypting keystores. Default: file generated with `create-keys` command |
| <nobr>`--hot-wallet-file`</nobr> | Absolute path to the hot wallet. Default: file generated with `create-wallet` command |
| <nobr>`--hot-wallet-password-file`</nobr> | Absolute path to the hot wallet password file. Default: file generated with `create-wallet` command |
| <nobr>`--max-fee-per-gas-gwei`</nobr> | Maximum fee per gas for transactions. Default: 10 Gwei for Ethereum, 2 Gwei for Gnosis |
| <nobr>`--database-dir`</nobr> | The directory where the database will be created or read from. Default: `~/.stakewise/<vault>` |
| <nobr>`--data-dir`</nobr> | Path where the vault data will be placed. Default: `~/.stakewise` |

:::custom-tips[Reduce CPU Load]
The `--pool-size` flag can be passed with both `start` and `create-keys` commands. This flag defines the number of CPU cores used to load and create keystores. By default, Operator Service will use 100% of the CPU cores.
Setting `--pool-size` to `(number of CPU cores) / 2` is a safe way to ensure that Operator Service does not take up too much CPU load and impact node performance during the creation and loading of keystores.
:::

:::custom-info[Environment Variables]
Operator Service can be configured via environment variables instead of CLI flags. Copy [this example file â†—](https://github.com/stakewise/v3-operator/blob/master/.env.example) and save it as `.env`. Adjust as necessary based on your node configuration.

Load environment variables before running Operator Service:
```bash
export $(grep -v '^#' .env | xargs)
:::

You can check the environment variables are set and loaded correctly by running `env`.

## Next Steps

Continue to [Additional Actions â†’](./additional-actions/) to explore optional configurations and integrations to enhance your Operator Service setup, including validator performance tracking with Rated Network.
